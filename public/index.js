!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);class s{constructor(){this._element=null}getTemplate(){throw new Error("not on abstract class")}createElement(t){const e=document.createElement("div");return e.innerHTML=t,e.firstChild}getElement(){return this._element||(this._element=this.createElement(this.getTemplate())),this._element}deleteElement(){this._element=null}}class r extends s{constructor(t){super(),this._type=t}getTemplate(){return`<button class="button button--new button--${t=this._type}">+ add another ${t}</button>`;var t}onNewButtonClick(t){this.getElement().parentElement.querySelector(".button--"+this._type).addEventListener("click",t)}}class o extends s{constructor(t){super(),this._listID=t}getTemplate(){return`<div class="group group--new group--list" data-value="listID--${this._listID}">\n      <input type="text" name="new" id="newItem" class="input user-list-input" placeholder="enter new list name..." autocomplete="off">\n      <div class="group group--buttons">\n        <button class="button button--add">add</button>\n        <button class="button button--service button--cancel">X</button>\n      </div>\n    </div>`}onAddbuttonClick(t){this.getElement().querySelector(".button--add").addEventListener("click",t)}onCancelButoonClick(t){this.getElement().querySelector(".button--cancel").addEventListener("click",t)}}class i extends s{constructor(t,e){super(),this._index=t,this._listName=e}getTemplate(){return t=this._listName,`<ul class="taskList" id="${this._index}">\n      <h3 class="taskList__name">${t}</h3>\n      <button class="button button--service button--delete">&#128465</button>\n    </ul>`;var t}onNewButtonClick(t){this.getElement().querySelector(".button--card").addEventListener("click",t)}onDeleteButoonClick(t){this.getElement().querySelector(".button--delete").addEventListener("click",t)}onHeadingMouseMove(t){this.getElement().querySelector(".taskList__name").addEventListener("mousedown",t)}}class l extends s{constructor(t,e){super(),this._previousInput=e,this._cardID=t}getTemplate(){return t=this._cardID,e=this._previousInput,`<div class="group group--new group--edit" data-value="cardID--${t}">\n      <textarea name="" id="" cols="30" rows="5" class="edit-textarea user-card-input" placeholder="enter your task...">${e}</textarea>\n      <div class="group group--buttons">\n        <button class="button button--add button--edit">edit</button>\n        <button class="button button--service button--cancel button--editcancel">X</button>\n        <button class="button button--service button--editdelete">&#128465</button>\n      </div>\n    </div>`;var t,e}onEditButtonClick(t){this.getElement().querySelector(".button--edit").addEventListener("click",t)}onEditCancelButtonClick(t){this.getElement().querySelector(".button--editcancel").addEventListener("click",t)}onEditDeleteButtonClick(t){this.getElement().querySelector(".button--editdelete").addEventListener("click",t)}}class c extends s{constructor(t,e){super(),this._index=t,this._text=e}getTemplate(){return t=this._index,e=this._text,`<li class="card" id="${t}">\n      <button class="button button--service button--edit">&#128394;</button>\n      <p class="card__text">${e}</p>\n    </li>`;var t,e}onEditButoonClick(t){this.getElement().querySelector(".button--edit").addEventListener("click",t)}}class a{static hideButton(t){t.style.display="none"}static showButton(t){t.style.display="block"}static deleteBlock(t,e){t.querySelector(e).remove()}static deleteNode(t,e){t.querySelector(e).remove()}static getUserInput(t,e){return t.querySelector(e).value}static getPreviousInput(t,e){return t.querySelector(e).textContent}static setIndex(t,e){return this._isIndexLegal(t,e)||(e-=1,this.setIndex(t,e)),e}static _isIndexLegal(t,e){return!(t.findIndex(t=>t.id==e)>-1)}}class u{constructor(t,e){this._newButton=new r("card"),this._listElement=t,this._listData=e,this._cardAmount=this._listData.cardAmount}render(){this._renderNewButton()}renderCards(){this._listData.cards.forEach(t=>{const e=new c(t.cardID,t.cardText);e.onEditButoonClick(n=>{const s=n.target.nextElementSibling.textContent;e.getElement().remove(),this._createBlock(t.cardID,s)}),this._listElement.insertBefore(e.getElement(),this._listElement.lastChild)})}_renderNewButton(){this._newButton.onNewButtonClick(()=>{a.hideButton(this._newButton.getElement()),this._createBlock(this._cardAmount,"")}),this._listElement.append(this._newButton.getElement())}_createBlock(t,e){const n=new l(t,e);n.onEditButtonClick(()=>{const e=a.getUserInput(this._listElement,".user-card-input");this._createCard(t,e)}),n.onEditCancelButtonClick(()=>{if(e){const e=a.getPreviousInput(this._listElement,".user-card-input");this._createCard(t,e)}else this._resetBlock()}),n.onEditDeleteButtonClick(()=>{e?(this._listData.deleteCardFromLocalDATA(t),this._resetBlock(),--this._cardAmount):this._resetBlock()}),this._listElement.insertBefore(n.getElement(),this._listElement.lastChild)}_createCard(t,e){this._listData.editCardInlocalDATA(t,e);const n=new c(t,e);n.onEditButoonClick(e=>{const s=e.target.nextElementSibling.textContent;n.getElement().remove(),this._createBlock(t,s)}),this._resetBlock(),++this._cardAmount,this._listElement.insertBefore(n.getElement(),this._listElement.lastChild)}_resetBlock(){a.deleteBlock(this._listElement,".group--edit"),a.showButton(this._newButton.getElement())}}class d{constructor(t,e,n,s){this.listID=t,this.h3=e,this.cardAmount=n,this.cards=s,this.keyName=this.h3+"--list"}createListInLocalDATA(){const t={listID:this.listID,h3:this.h3,cardAmount:this.cardAmount,cards:this.cards};localStorage.setItem(this.keyName,JSON.stringify(t))}deleteListFormLocalDATA(){localStorage.removeItem(this.keyName)}editCardInlocalDATA(t,e){const n=this._getObjFromLocalData(),s=n.cards.findIndex(e=>e.cardID==t);s>-1?n.cards[s].cardText=e:(n.cards.push({cardID:t,cardText:e}),n.cardAmount=n.cardAmount+1),this.cards=n.cards,localStorage.setItem(this.keyName,JSON.stringify(n))}deleteCardFromLocalDATA(t){const e=this._getObjFromLocalData(),n=e.cards.findIndex(e=>e.cardID==t);e.cards.splice(n,1),e.cardAmount=e.cardAmount-1,this.cards=e.cards,localStorage.setItem(this.keyName,JSON.stringify(e))}_getObjFromLocalData(){return JSON.parse(localStorage.getItem(this.keyName))}}const h=document.querySelector(".app");class m{constructor(){this._newButton=new r("list"),this._listAmount=localStorage.length}start(){this._renderNewButton(),this._renderStorage()}_renderNewButton(){this._newButton.onNewButtonClick(()=>{a.hideButton(this._newButton.getElement());const t=Array.from(h.querySelectorAll(".taskList")),e=a.setIndex(t,this._listAmount);this._createBlock(e)}),h.append(this._newButton.getElement())}_renderStorage(){for(let t=0;t<localStorage.length;t++){let e=localStorage.key(t);if(-1!=e.indexOf("--list")){const t=JSON.parse(localStorage.getItem(e)),n=t.listID,s=t.h3,r=t.cardAmount,o=t.cards,i=new d(n,s,r,o);this._createNewList(i);const l=document.getElementById(n);this._createCards(l,i)}}}_createBlock(t){const e=new o(t);e.onAddbuttonClick(()=>{const e=a.getUserInput(document,".user-list-input"),n=new d(t,e,0,[]);n.createListInLocalDATA(),this._createNewList(n),this._resetBlock(),++this._listAmount}),e.onCancelButoonClick(()=>{this._resetBlock()}),h.append(e.getElement())}_createNewList(t){const e=new i(t.listID,t.h3);e.onDeleteButoonClick(()=>{document.getElementById(t.listID).remove(),t.deleteListFormLocalDATA(),--this._listAmount}),e.onHeadingMouseMove(t=>{t.preventDefault();const n=t.clientX;e.getElement().style.zIndex="1";const s=t=>{const s=n-t.clientX;e.getElement().style.right=s+"px"},r=t=>{const n=e.getElement().style.right.slice(0,-2),o=Array.from(t.currentTarget.parentElement.querySelectorAll(".taskList")).findIndex(e=>e.id==t.currentTarget.id),i=t.currentTarget.parentElement.querySelectorAll(".taskList");if(n<=0)if(n<=0&&n>=-50)e.getElement().style.right="0px";else if(i.length-1===o)e.getElement().style.right="0px";else{const t=h.replaceChild(i[o],i[o+1]);h.insertBefore(t,i[o]),e.getElement().style.right="0px"}else if(n>=0&&n<50)e.getElement().style.right="0px";else{const t=h.replaceChild(i[o],i[o-1]);i[o].after(t),e.getElement().style.right="0px"}e.getElement().style.zIndex="0",e.getElement().removeEventListener("mousemove",s),e.getElement().removeEventListener("mouseup",r)};e.getElement().addEventListener("mousemove",s),e.getElement().addEventListener("mouseup",r)}),h.insertBefore(e.getElement(),this._newButton.getElement()),new u(e.getElement(),t).render()}_createCards(t,e){new u(t,e).renderCards()}_resetBlock(){a.deleteBlock(document,".group--list"),a.showButton(this._newButton.getElement())}}(new class{constructor(){this.board=new m}start(){this.board.start()}}).start()}]);
//# sourceMappingURL=index.js.map